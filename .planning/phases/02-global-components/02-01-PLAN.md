---
phase: 02-global-components
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - components/layout/Header.tsx
  - components/layout/DesktopNav.tsx
  - components/layout/MobileMenu.tsx
  - lib/navigation.ts
  - app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "User can see the header with logo on all pages"
    - "User can navigate using desktop dropdown menus (About, Services)"
    - "User can open mobile menu on small screens and navigate all pages"
    - "Header is sticky and remains visible on scroll"
  artifacts:
    - path: "components/layout/Header.tsx"
      provides: "Server component with logo and navigation containers"
      min_lines: 20
    - path: "components/layout/DesktopNav.tsx"
      provides: "Client component with Headless UI dropdown menus"
      min_lines: 50
    - path: "components/layout/MobileMenu.tsx"
      provides: "Client component with slide-out mobile navigation"
      min_lines: 60
    - path: "lib/navigation.ts"
      provides: "Shared navigation structure data"
      exports: ["navigation"]
  key_links:
    - from: "app/layout.tsx"
      to: "components/layout/Header.tsx"
      via: "import and render in body"
      pattern: "import.*Header"
    - from: "components/layout/Header.tsx"
      to: "lib/navigation.ts"
      via: "navigation data passed to children"
      pattern: "import.*navigation"
---

<objective>
Build the responsive Header component with desktop dropdowns and mobile hamburger menu.

Purpose: COMP-01 requirement - enable site navigation on all screen sizes with proper accessibility
Output: Header component rendered in layout.tsx, working on desktop (dropdowns) and mobile (slide-out menu)
</objective>

<execution_context>
@C:\Users\matth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\matth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-global-components/02-RESEARCH.md
@.planning/phases/01-infrastructure/01-01-SUMMARY.md
@FRAMEWORK.md (Navigation Structure section around line 260)
@app/layout.tsx
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and create navigation data</name>
  <files>package.json, lib/navigation.ts</files>
  <action>
Install required packages:
```bash
npm install @headlessui/react @heroicons/react clsx
```

Create lib/navigation.ts with the navigation structure from FRAMEWORK.md:
- Main nav items: Home, About (with children), Contact Us, Services (with children), Locations, Booking
- About children: Why Choose Us, Our Process, Cleaning Tips, FAQ's
- Services children: Residential Cleaning (/residential-cleaning), Commercial Cleaning, Deep Cleaning, Move-In/Move-Out Cleaning (/move-in-move-out-cleaning), Additional Services

**IMPORTANT:** Use clean URLs (no numbers) for service pages. FRAMEWORK.md lists legacy URLs with numbers, but PROJECT.md explicitly states: "Clean URLs over legacy - Use /residential-cleaning instead of /residential-cleaning369987"

Export TypeScript interfaces for NavItem type.
  </action>
  <verify>
- `npm ls @headlessui/react @heroicons/react clsx` shows packages installed
- lib/navigation.ts exists and exports navigation array
  </verify>
  <done>Dependencies installed, navigation data structure exported from lib/navigation.ts</done>
</task>

<task type="auto">
  <name>Task 2: Create Header, DesktopNav, and MobileMenu components</name>
  <files>components/layout/Header.tsx, components/layout/DesktopNav.tsx, components/layout/MobileMenu.tsx</files>
  <action>
Create components/layout/ directory if needed.

**Header.tsx** (Server Component - no 'use client'):
- Sticky header with z-40, white background, subtle shadow
- Container with logo (left) linking to home using next/image (180x60)
- Desktop nav visible on md+ screens, hidden on mobile
- Mobile menu button visible on mobile, hidden on md+ screens
- Import and render DesktopNav and MobileMenu as children

**DesktopNav.tsx** (Client Component - 'use client'):
- Import navigation from lib/navigation.ts
- Use Headless UI Menu component for items with children (About, Services)
- For items without children, render simple Next.js Link
- Dropdown styling: white bg, shadow-lg, rounded-lg, hover states using data-[focus]
- Use ChevronDownIcon from @heroicons/react/20/solid for dropdown indicators
- Apply Tailwind classes for brand colors (text-primary on hover, bg-background-alt on focus)

**MobileMenu.tsx** (Client Component - 'use client'):
- useState for isOpen state (initialize false)
- Hamburger button (Bars3Icon) to open
- Use Headless UI Dialog for slide-out menu from right
- Semi-transparent backdrop (bg-black/30)
- Close button (XMarkIcon) in panel header
- Render all navigation items as flat list (no nested dropdowns for mobile simplicity)
- Include "Get FREE Estimate" button at bottom (this button will work after Plan 02 adds the modal)

Use z-index scale from research:
- Header: z-40
- Mobile menu backdrop: z-50
- Mobile menu panel: z-50
  </action>
  <verify>
- All three component files exist in components/layout/
- TypeScript compiles without errors: `npx tsc --noEmit`
  </verify>
  <done>Header renders with logo, DesktopNav shows dropdown menus, MobileMenu slides out on mobile</done>
</task>

<task type="auto">
  <name>Task 3: Integrate Header into root layout</name>
  <files>app/layout.tsx</files>
  <action>
Update app/layout.tsx:
- Import Header from @/components/layout/Header
- Add Header component inside body, before {children}
- Wrap {children} in a main element for semantic HTML

The body structure should be:
```tsx
<body className="font-body bg-background text-text-primary">
  <Header />
  <main>{children}</main>
</body>
```

Verify the site still runs with npm run dev.
  </action>
  <verify>
- `npm run dev` starts successfully
- Visit http://localhost:3000 and verify:
  - Logo visible in header
  - Desktop: Dropdown menus work (hover/click on About, Services)
  - Mobile (resize to <768px): Hamburger menu appears, click opens slide-out panel
  </verify>
  <done>Header appears on all pages with working desktop dropdowns and mobile menu</done>
</task>

</tasks>

<verification>
1. `npm run dev` starts without errors
2. Desktop view (>768px):
   - Header sticky at top with logo
   - About dropdown shows: Why Choose Us, Our Process, Cleaning Tips, FAQ's
   - Services dropdown shows: Residential, Commercial, Deep, Move-In/Move-Out, Additional
   - All navigation links work (pages may show 404 until built - that's expected)
3. Mobile view (<768px):
   - Hamburger icon visible, dropdowns hidden
   - Click hamburger opens slide-out menu from right
   - All nav items listed, clicking closes menu and navigates
4. No TypeScript errors: `npx tsc --noEmit`
5. No console errors in browser dev tools
</verification>

<success_criteria>
- Header component renders on all pages via layout.tsx
- Desktop navigation works with accessible Headless UI dropdowns
- Mobile navigation works with slide-out Headless UI dialog
- Logo links to home page
- Header is sticky (position: sticky or fixed) and stays visible on scroll
- Clean URLs used for navigation links (no legacy number suffixes)
</success_criteria>

<output>
After completion, create `.planning/phases/02-global-components/02-01-SUMMARY.md`
</output>
