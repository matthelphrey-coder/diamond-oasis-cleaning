---
phase: 02-global-components
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - components/layout/Footer.tsx
  - components/ui/StickyCtaButton.tsx
  - components/ui/EstimateModal.tsx
  - components/layout/Breadcrumbs.tsx
  - components/seo/SchemaMarkup.tsx
  - lib/schema.ts
  - app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Footer displays contact info, quick links, social links, and legal links"
    - "Sticky CTA button appears fixed at bottom-right on all pages"
    - "Clicking CTA button opens modal with GHL form iframe"
    - "Modal can be closed via X button, Escape key, or backdrop click"
    - "Breadcrumbs show navigation path on all pages except home"
  artifacts:
    - path: "components/layout/Footer.tsx"
      provides: "Footer with 4-column layout on desktop"
      min_lines: 60
    - path: "components/ui/StickyCtaButton.tsx"
      provides: "Fixed CTA button that opens modal"
      min_lines: 20
    - path: "components/ui/EstimateModal.tsx"
      provides: "Headless UI Dialog with GHL form iframe"
      min_lines: 40
    - path: "components/layout/Breadcrumbs.tsx"
      provides: "Dynamic breadcrumbs using usePathname"
      min_lines: 40
    - path: "components/seo/SchemaMarkup.tsx"
      provides: "JSON-LD injection component"
      min_lines: 15
    - path: "lib/schema.ts"
      provides: "Schema generation utilities"
      exports: ["organizationSchema", "generateBreadcrumbSchema"]
  key_links:
    - from: "app/layout.tsx"
      to: "components/layout/Footer.tsx"
      via: "import and render after main"
      pattern: "import.*Footer"
    - from: "app/layout.tsx"
      to: "components/ui/StickyCtaButton.tsx"
      via: "import and render in body"
      pattern: "import.*StickyCtaButton"
    - from: "components/ui/StickyCtaButton.tsx"
      to: "components/ui/EstimateModal.tsx"
      via: "modal state and rendering"
      pattern: "EstimateModal.*isOpen"
---

<objective>
Build Footer, Sticky CTA with modal, Breadcrumbs, and Schema markup components.

Purpose: COMP-02 through COMP-06 requirements - complete the global component set for site-wide use
Output: Footer on all pages, sticky CTA button opening estimate modal, breadcrumbs on subpages, Organization schema in layout
</objective>

<execution_context>
@C:\Users\matth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\matth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-global-components/02-RESEARCH.md
@.planning/phases/01-infrastructure/01-01-SUMMARY.md
@FRAMEWORK.md (Footer section ~line 294, Embed Codes ~line 303, Schema Markup ~line 532)
@app/layout.tsx
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Footer component</name>
  <files>components/layout/Footer.tsx</files>
  <action>
Create components/layout/Footer.tsx (Server Component - no 'use client' needed):

**Structure:** 4-column grid on desktop (md:grid-cols-4), stacking on mobile
**Background:** bg-primary (navy), text-white

**Column 1 - Logo & Contact:**
- Logo image (150x50) - use next/image
- "Las Vegas, NV" text
- Phone: (725) 502-2820 as clickable tel: link
- Email: diamondoasiscleaning@gmail.com as clickable mailto: link

**Column 2 - Quick Links:**
- Heading: "Quick Links"
- Links: Home, About, Services, Locations, Contact Us, Booking

**Column 3 - Legal:**
- Heading: "Legal"
- Links: Privacy Policy (/privacy-policy), Terms & Conditions (/terms-and-conditions)

**Column 4 - Follow Us:**
- Heading: "Follow Us"
- Social icons: Facebook, Instagram, YouTube (all link to "#" placeholder)
- Use simple SVG icons inline or from Heroicons

**Bottom bar:**
- Border top (border-white/20)
- Copyright: "Â© Diamond Oasis Cleaning 2025 All Rights Reserved"

Use hover:text-secondary-light for link hover states.
  </action>
  <verify>
- File exists at components/layout/Footer.tsx
- TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>Footer component created with contact info, quick links, social links, and legal links</done>
</task>

<task type="auto">
  <name>Task 2: Create StickyCtaButton and EstimateModal components</name>
  <files>components/ui/StickyCtaButton.tsx, components/ui/EstimateModal.tsx</files>
  <action>
Create components/ui/ directory if needed.

**EstimateModal.tsx** (Client Component - 'use client'):
- Use Headless UI Dialog, DialogPanel, DialogTitle
- Props: isOpen (boolean), onClose (function)
- Backdrop: fixed inset-0 bg-black/60 backdrop-blur-sm, z-[60]
- Panel: max-w-lg, bg-white, rounded-2xl, shadow-2xl, z-[70]
- Title: "Get Your FREE Estimate" with font-heading text-primary
- Close button: top-right, XMarkIcon, hover:bg-background-alt rounded-full
- Content: GHL form iframe from FRAMEWORK.md:
  - src: https://api.leadconnectorhq.com/widget/form/jjqVGQG6yKAgawF12waP
  - height: 622px, width: 100%, border: none
  - title: "Contact Information Form" (accessibility)
- Dialog handles: focus trapping, Escape to close, backdrop click to close (built-in)

**StickyCtaButton.tsx** (Client Component - 'use client'):
- useState for modal isOpen state (initialize false)
- Fixed positioning: fixed bottom-6 right-6 z-50
- Styling: bg-secondary hover:bg-secondary-light, text-white, font-bold
- Rounded-full with shadow-2xl
- Include clipboard/form icon (inline SVG as shown in FRAMEWORK.md)
- Text: "Get FREE Estimate"
- hover:scale-105 transition for subtle animation
- onClick opens modal by setting isOpen to true
- Render EstimateModal component with isOpen and onClose props
  </action>
  <verify>
- Both files exist in components/ui/
- TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>Sticky CTA button and modal components created with proper z-index layering</done>
</task>

<task type="auto">
  <name>Task 3: Create Breadcrumbs and SchemaMarkup components</name>
  <files>components/layout/Breadcrumbs.tsx, components/seo/SchemaMarkup.tsx, lib/schema.ts</files>
  <action>
**Breadcrumbs.tsx** (Client Component - 'use client'):
- Use usePathname from next/navigation
- Return null if pathname === '/' (no breadcrumbs on home)
- Create pathNameMap object mapping slugs to display names:
  - Handle both clean URLs and any legacy URLs
  - Map: about -> About, services -> Services, residential-cleaning -> Residential Cleaning, etc.
  - Include all pages from FRAMEWORK.md site structure
- Split pathname into segments, build cumulative hrefs
- Render: nav with aria-label="Breadcrumb"
- Structure: Home (link) / Segment1 (link) / Segment2 (current, not a link)
- Style: text-sm, text-text-secondary for links, text-text-primary for current
- Separator: "/" or ">" character between items

**lib/schema.ts** (no client directive - can be used in server components):
- Export organizationSchema object matching FRAMEWORK.md Organization Schema (~line 534)
- Export generateBreadcrumbSchema function that takes array of {name, href} and returns BreadcrumbList schema
- Use proper schema.org structure with @context, @type
- Site URL: https://diamondoasiscleaning.com

**SchemaMarkup.tsx** (Server Component - no 'use client'):
- Props: schema (object)
- Render script tag with type="application/ld+json"
- Use dangerouslySetInnerHTML with JSON.stringify
- **CRITICAL:** Sanitize by replacing < with \\u003c to prevent XSS:
  `JSON.stringify(schema).replace(/</g, '\\u003c')`
  </action>
  <verify>
- All three files exist
- TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>Breadcrumbs component renders path, SchemaMarkup safely injects JSON-LD</done>
</task>

<task type="auto">
  <name>Task 4: Integrate components into root layout</name>
  <files>app/layout.tsx</files>
  <action>
Update app/layout.tsx to include all new components:

1. Add imports:
   - Footer from @/components/layout/Footer
   - StickyCtaButton from @/components/ui/StickyCtaButton
   - SchemaMarkup from @/components/seo/SchemaMarkup
   - organizationSchema from @/lib/schema

2. Update body structure (Header should already be there from Plan 01, but if running in parallel, include it):
```tsx
<body className="font-body bg-background text-text-primary">
  <Header />
  <main className="min-h-screen">{children}</main>
  <Footer />
  <StickyCtaButton />
  <SchemaMarkup schema={organizationSchema} />
</body>
```

Note: Breadcrumbs will be added per-page rather than in root layout (pages will import and render it in their own layout/page files). This allows pages to control their own breadcrumb visibility and provides context for generating BreadcrumbList schema per-page.

3. Verify npm run dev works and all components render.
  </action>
  <verify>
- `npm run dev` starts without errors
- Visit http://localhost:3000:
  - Footer visible at bottom with all four sections
  - Sticky CTA button visible bottom-right (gold/secondary color)
  - Click CTA opens modal with GHL form
  - Modal closes on X click, Escape key, or backdrop click
  - View page source: Organization JSON-LD script present
  </verify>
  <done>All components integrated into layout, site renders with header, footer, CTA, and schema</done>
</task>

</tasks>

<verification>
1. `npm run dev` starts without errors
2. Footer verification:
   - 4-column layout on desktop, stacked on mobile
   - All links present and styled correctly
   - Phone and email are clickable
3. Sticky CTA verification:
   - Button fixed at bottom-right, visible on scroll
   - Click opens modal
   - Modal shows GHL form iframe
   - Modal closes via X button, Escape, backdrop click
   - Focus trapped inside modal while open
4. Schema verification:
   - View page source (Ctrl+U)
   - Find `<script type="application/ld+json">`
   - Organization schema present with correct data
5. Breadcrumbs (for future pages):
   - Component ready for import by individual pages
   - Returns null on home page (verified if imported there)
6. No TypeScript errors: `npx tsc --noEmit`
7. Z-index layering correct: CTA (z-50) appears above content, modal (z-60/70) appears above CTA
</verification>

<success_criteria>
- Footer renders on all pages with contact info, quick links, social links, legal links
- Sticky CTA button always visible at bottom-right corner
- Modal opens with GHL form and handles all close interactions
- Organization schema injected in page source
- Breadcrumbs component ready for page-level use
- All components use brand colors and typography from Tailwind theme
</success_criteria>

<output>
After completion, create `.planning/phases/02-global-components/02-02-SUMMARY.md`
</output>
