---
phase: 08-seo-technical
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/sitemap.ts
  - app/robots.ts
  - app/page.tsx
  - app/about/page.tsx
  - app/why-choose-us/page.tsx
  - app/process/page.tsx
  - app/cleaning-tips/page.tsx
  - app/faqs/page.tsx
  - app/services/page.tsx
  - app/residential-cleaning/page.tsx
  - app/commercial-cleaning/page.tsx
  - app/deep-cleaning/page.tsx
  - app/move-in-move-out-cleaning/page.tsx
  - app/additional-services/page.tsx
  - app/contact-us/page.tsx
  - app/booking/page.tsx
  - app/locations/page.tsx
  - app/locations/[slug]/page.tsx
  - app/privacy-policy/page.tsx
  - app/terms-and-conditions/page.tsx
autonomous: true

must_haves:
  truths:
    - "XML sitemap at /sitemap.xml lists all 24 pages with correct URLs"
    - "robots.txt at /robots.txt references sitemap and allows all crawlers"
    - "All meta titles are under 60 characters"
    - "All meta descriptions are 150-160 characters"
    - "All pages except home have canonical URLs"
    - "BreadcrumbList schema validates on Google Rich Results Test"
  artifacts:
    - path: "app/sitemap.ts"
      provides: "Dynamic sitemap generation for all 24 pages"
      exports: ["default function sitemap"]
    - path: "app/robots.ts"
      provides: "Dynamic robots.txt with sitemap reference"
      exports: ["default function robots"]
  key_links:
    - from: "app/sitemap.ts"
      to: "data/locations.json"
      via: "import for dynamic location slugs"
      pattern: "import.*locations.*from"
    - from: "app/robots.ts"
      to: "/sitemap.xml"
      via: "sitemap URL reference"
      pattern: "sitemap:.*sitemap.xml"
---

<objective>
Create sitemap.ts, robots.ts, and audit all page metadata for SEO compliance.

Purpose: Ensure search engines can discover and index all pages correctly, with optimized meta tags for search results display.

Output: Dynamic sitemap/robots files and all 24 pages with compliant metadata (titles <60 chars, descriptions 150-160 chars, canonical URLs).
</objective>

<execution_context>
@.claude/get-shit-done/workflows/execute-plan.md
@.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-seo-technical/08-RESEARCH.md
@data/locations.json
@lib/schema.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create sitemap.ts and robots.ts</name>
  <files>
    - app/sitemap.ts
    - app/robots.ts
    - public/robots.txt (DELETE)
  </files>
  <action>
Create app/sitemap.ts using Next.js MetadataRoute.Sitemap type:
- Import locations from @/data/locations.json
- BASE_URL = 'https://diamondoasiscleaning.com'
- Core pages (/, /services, /contact-us) with priority 1.0-0.9
- Service pages (/residential-cleaning, etc.) with priority 0.8
- About section (/about, /why-choose-us, /process, /cleaning-tips, /faqs) with priority 0.7
- Location pages (/locations, /locations/[slug]) with priority 0.7-0.8
- Utility pages (/booking, /privacy-policy, /terms-and-conditions) with priority 0.3
- All pages get lastModified: new Date() and changeFrequency: 'monthly' (yearly for legal pages)

Create app/robots.ts using MetadataRoute.Robots type:
- Allow all crawlers (userAgent: '*')
- Allow: '/'
- Reference sitemap: 'https://diamondoasiscleaning.com/sitemap.xml'

Delete public/robots.txt (replaced by dynamic robots.ts).

Reference code examples from 08-RESEARCH.md lines 196-308.
  </action>
  <verify>
Run `npm run build` - check that /sitemap.xml and /robots.txt routes are generated.
After dev server start: `curl http://localhost:3000/sitemap.xml` returns XML with all 24 page URLs.
`curl http://localhost:3000/robots.txt` returns robots.txt with sitemap reference.
  </verify>
  <done>
sitemap.xml accessible at /sitemap.xml with all 24 pages listed.
robots.txt accessible at /robots.txt with sitemap reference.
Static public/robots.txt is deleted.
  </done>
</task>

<task type="auto">
  <name>Task 2: Audit and fix metadata on all static pages</name>
  <files>
    - app/page.tsx
    - app/about/page.tsx
    - app/why-choose-us/page.tsx
    - app/process/page.tsx
    - app/cleaning-tips/page.tsx
    - app/faqs/page.tsx
    - app/services/page.tsx
    - app/residential-cleaning/page.tsx
    - app/commercial-cleaning/page.tsx
    - app/deep-cleaning/page.tsx
    - app/move-in-move-out-cleaning/page.tsx
    - app/additional-services/page.tsx
    - app/contact-us/page.tsx
    - app/booking/page.tsx
    - app/locations/page.tsx
    - app/privacy-policy/page.tsx
    - app/terms-and-conditions/page.tsx
  </files>
  <action>
For each static page, audit and update metadata export:

1. **Title requirements:**
   - Under 60 characters total (including " | Diamond Oasis Cleaning" suffix from template)
   - Include primary keyword for page topic
   - Format: "[Primary Keyword] Las Vegas | Diamond Oasis" or use template

2. **Description requirements:**
   - 150-160 characters exactly
   - Include primary keyword and CTA ("Get your free estimate today!")
   - Be compelling for search results

3. **Add canonical URL to all pages:**
   ```typescript
   alternates: {
     canonical: '/page-path',
   }
   ```

4. **Verify exactly one H1 per page** (already done, just confirm during audit)

Specific page metadata targets:
- Home: "House Cleaning Las Vegas" (use layout.tsx default)
- About: "About Us | Las Vegas House Cleaning" (<60 chars)
- Services: "Cleaning Services Las Vegas" (<60 chars)
- Residential: "Residential Cleaning Las Vegas" (<60 chars)
- Commercial: "Commercial Cleaning Las Vegas" (<60 chars)
- Contact: "Contact Us | Diamond Oasis Cleaning" (<60 chars)
- Booking: "Book Cleaning Service Las Vegas" (<60 chars)
- Locations hub: "Service Locations | Las Vegas Valley" (<60 chars)

Count characters carefully - template adds " | Diamond Oasis Cleaning" (26 chars) so base title must be <34 chars.
  </action>
  <verify>
For each page:
1. Count title characters (must be <60 total after template)
2. Count description characters (must be 150-160)
3. Verify alternates.canonical is set
4. Verify single H1 tag exists

Run `npm run build` - no metadata warnings.
  </verify>
  <done>
All 17 static pages have:
- Meta title under 60 characters
- Meta description 150-160 characters
- Canonical URL set
- Exactly one H1 tag
  </done>
</task>

<task type="auto">
  <name>Task 3: Audit location page dynamic metadata</name>
  <files>
    - app/locations/[slug]/page.tsx
  </files>
  <action>
Audit generateMetadata function in location page template:

1. **Title check:**
   Current: "House Cleaning in ${location.displayName} Las Vegas | Diamond Oasis Cleaning"
   Some location names (e.g., "Northwest Las Vegas") will make title too long.
   Fix: Shorten to "Cleaning in ${displayName} | Diamond Oasis" pattern if over 60 chars.

2. **Description check:**
   Current includes serviceAreas which can vary in length.
   Ensure all generated descriptions stay within 150-160 chars.
   Fix: Truncate serviceAreas to first 2 items if needed, or rewrite description template.

3. **Canonical URL:**
   Already set - verify format is correct (relative URL is fine).

Test with longest location name (Northwest Las Vegas) and most service areas.

Updated generateMetadata pattern:
```typescript
export async function generateMetadata({ params }: Props): Promise<Metadata> {
  const { slug } = await params;
  const location = locations.locations.find((loc) => loc.slug === slug);

  if (!location) {
    return { title: "Location Not Found" };
  }

  // Keep title under 60 chars
  const title = `Cleaning ${location.displayName} NV | Diamond Oasis`;

  // Keep description 150-160 chars
  const areas = location.serviceAreas.slice(0, 2).join(", ");
  const description = `Professional house cleaning in ${location.displayName}, Las Vegas. Serving ${areas} and nearby. Licensed cleaners. Free estimates: ${location.phone}`;

  return {
    title,
    description,
    alternates: {
      canonical: `/locations/${location.slug}`,
    },
  };
}
```
  </action>
  <verify>
For each of 8 locations, verify:
1. Generated title is under 60 characters
2. Generated description is 150-160 characters
3. Canonical URL is set

Test with: las-vegas-south, las-vegas-northwest (longest names), henderson (shortest).
  </verify>
  <done>
All 8 location pages generate metadata that meets:
- Title under 60 characters
- Description 150-160 characters
- Canonical URL present
  </done>
</task>

</tasks>

<verification>
## Phase Verification

1. **Sitemap/Robots Check:**
   - `npm run build` completes without errors
   - `/sitemap.xml` returns valid XML with 24 URLs
   - `/robots.txt` references sitemap correctly

2. **Metadata Audit:**
   - Run through all 24 pages and count title/description lengths
   - All titles < 60 chars
   - All descriptions 150-160 chars
   - All pages have canonical URLs

3. **Schema Validation:**
   - Test 3 representative pages in Google Rich Results Test:
     - /residential-cleaning (service page with BreadcrumbList + Service schema)
     - /locations/henderson (location page with BreadcrumbList + LocalBusiness schema)
     - /faqs (FAQ page with BreadcrumbList + FAQPage schema)
   - All should show "Valid" for their respective schema types
</verification>

<success_criteria>
- sitemap.xml accessible at /sitemap.xml with all 24 pages
- robots.txt accessible at /robots.txt with sitemap reference
- All 24 pages have meta titles under 60 characters
- All 24 pages have meta descriptions 150-160 characters
- All pages except home have canonical URLs
- Build completes without metadata warnings
</success_criteria>

<output>
After completion, create `.planning/phases/08-seo-technical/08-01-SUMMARY.md`
</output>
