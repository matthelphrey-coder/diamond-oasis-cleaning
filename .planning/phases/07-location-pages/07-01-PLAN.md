---
phase: 07-location-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/schema.ts
  - app/locations/page.tsx
autonomous: true

must_haves:
  truths:
    - "User can navigate to /locations and see cards for all 8 locations"
    - "Each location card shows name, address, phone, and link to detail page"
    - "generateLocalBusinessSchema function exists and returns valid schema"
  artifacts:
    - path: "lib/schema.ts"
      provides: "generateLocalBusinessSchema function"
      exports: ["generateLocalBusinessSchema", "LocationData"]
    - path: "app/locations/page.tsx"
      provides: "Locations hub page with grid of 8 location cards"
      min_lines: 60
  key_links:
    - from: "app/locations/page.tsx"
      to: "@/data/locations.json"
      via: "import"
      pattern: "import.*locations.*from.*@/data/locations"
    - from: "app/locations/page.tsx"
      to: "/locations/[slug]"
      via: "Link href"
      pattern: "href=.*locations/.*slug"
---

<objective>
Create the locations hub page and LocalBusiness schema generator function.

Purpose: Enables users to discover all 8 Las Vegas Valley locations from a central hub page, and provides schema infrastructure for individual location pages.

Output:
- generateLocalBusinessSchema function in lib/schema.ts
- /locations page with responsive grid of location cards linking to individual pages
</objective>

<execution_context>
@C:\Users\matth\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\matth\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-location-pages/07-RESEARCH.md

@lib/schema.ts
@app/services/page.tsx
@data/locations.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add generateLocalBusinessSchema to lib/schema.ts</name>
  <files>lib/schema.ts</files>
  <action>
Add LocationData interface and generateLocalBusinessSchema function to lib/schema.ts.

**LocationData interface:**
```typescript
export interface LocationData {
  slug: string;
  name: string;
  displayName: string;
  street: string;
  city: string;
  state: string;
  zip: string;
  phone: string;
  email: string;
  coordinates: { lat: number; lng: number };
  serviceAreas: string[];
}
```

**generateLocalBusinessSchema function:**
- Input: LocationData object
- Output: Schema.org LocalBusiness JSON-LD object
- Include: @context, @type, @id, name, image, url, telephone, email
- Include: address (PostalAddress type with full address)
- Include: geo (GeoCoordinates with lat/lng)
- Include: openingHoursSpecification (Mon-Sat 08:00-18:00)
- Include: priceRange ("$$")
- Include: areaServed (array of City objects from serviceAreas)
- Use SITE_URL constant already defined in the file

Follow the exact pattern from 07-RESEARCH.md "LocalBusiness Schema Generator Function" section.
  </action>
  <verify>
TypeScript compiles: `npx tsc --noEmit lib/schema.ts`
Function is exported: grep for "export function generateLocalBusinessSchema"
  </verify>
  <done>
generateLocalBusinessSchema function exists, accepts LocationData, returns valid LocalBusiness schema object with all required fields.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create locations hub page with grid</name>
  <files>app/locations/page.tsx</files>
  <action>
Create the locations hub page following the services/page.tsx pattern exactly.

**Structure:**
1. Static metadata export:
   - title: "Locations | House Cleaning Las Vegas | Diamond Oasis Cleaning"
   - description: "Find Diamond Oasis Cleaning locations across Las Vegas Valley. 8 locations serving Henderson, Summerlin, and all Las Vegas areas. Call for free estimate!"

2. Breadcrumbs array: Home -> Locations

3. Page component with sections:
   - SchemaMarkup with generateBreadcrumbSchema(breadcrumbs)
   - Hero section (bg-primary, white text, h1 "Our Las Vegas Valley Locations", intro paragraph)
   - Breadcrumbs component
   - Intro section (white bg, centered text about serving the Las Vegas Valley)
   - Locations Grid section (bg-background-alt, responsive grid md:grid-cols-2 lg:grid-cols-3 gap-8)
   - CTA section (bg-primary, "Ready for a Sparkling Clean Home?")

**Location Card (inline, not separate component):**
- Link wrapping the card (href={`/locations/${location.slug}`})
- Card styling: group bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow duration-300
- h2: location.displayName (text-xl font-heading font-bold text-primary, group-hover:text-primary-light)
- Address: {street}, {city}, {state} {zip} (text-text-secondary text-sm)
- Phone: wrapped in anchor with phoneLink href (text-secondary hover:text-secondary-light)
- "View Location &rarr;" link indicator

**Imports:**
- Metadata from "next"
- Link from "next/link"
- SchemaMarkup from "@/components/seo/SchemaMarkup"
- Breadcrumbs from "@/components/layout/Breadcrumbs"
- generateBreadcrumbSchema from "@/lib/schema"
- locations from "@/data/locations.json"
  </action>
  <verify>
Dev server: `npm run dev` then visit http://localhost:3000/locations
Verify: Page renders with 8 location cards in responsive grid
Verify: Each card links to /locations/{slug}
  </verify>
  <done>
/locations page displays hero, breadcrumbs, and grid of 8 location cards. Each card shows location name, address, phone, and links to detail page.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. Visit /locations - see 8 location cards
3. Cards are responsive (1 col mobile, 2 cols tablet, 3 cols desktop)
4. Each card links to correct /locations/[slug] path
5. Breadcrumbs show Home > Locations
</verification>

<success_criteria>
- [ ] generateLocalBusinessSchema function exists and exports from lib/schema.ts
- [ ] LocationData interface is exported from lib/schema.ts
- [ ] /locations page renders with hero, breadcrumbs, grid, CTA sections
- [ ] All 8 locations from locations.json appear as cards
- [ ] Cards show displayName, address, phone number
- [ ] Cards link to /locations/{slug}
- [ ] Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/07-location-pages/07-01-SUMMARY.md`
</output>
